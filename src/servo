#pragma once
#include <Arduino.h>

namespace HeraCross
{

class Servo
{
    friend class ServoBus;
    private:
    int pin,maxAngle,minAngle,pulse_width;
    public:
    Servo(int _pin,int _maxAngle, int _minAngle,const char* _taskName)
    {
        pin=_pin;
        maxAngle=_maxAngle;
        minAngle=_minAngle;
        // servo_bus.Register(this);
    }
    void SetPulse(int pulse)
    {
        // pulse_width=pulse_in_100us;
        digitalWrite(pin,1);
        delayMicroseconds(pulse);
        digitalWrite(pin,0);
        delay(20-pulse_width/1000);
    }
    void SetAngle(int angle)
    {
        SetPulse(((angle*11)+500));
    }
    void TurnMax()
    {
        SetAngle(maxAngle);
    }
    void TurnMin()
    {
        SetAngle(minAngle);
    }
};

}